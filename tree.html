<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tree Component</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=JetBrains+Mono:wght@400;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --bg-primary: #0a0e27;
            --bg-secondary: #151b3d;
            --bg-tertiary: #1e2749;
            --accent-primary: #00d4ff;
            --accent-secondary: #00ff88;
            --text-primary: #e8edf4;
            --text-secondary: #8b95b0;
            --border-color: rgba(0, 212, 255, 0.15);
            --hover-bg: rgba(0, 212, 255, 0.08);
            --active-bg: rgba(0, 212, 255, 0.15);
            --shadow: 0 4px 24px rgba(0, 0, 0, 0.4);
        }
        
        body {
            font-family: 'DM Sans', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: var(--text-primary);
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            overflow-x: hidden;
        }
        
        .container {
            width: 100%;
            max-width: 600px;
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            animation: fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 24px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.5px;
        }
        
        .tree {
            list-style: none;
        }
        
        .tree-node {
            position: relative;
            margin: 4px 0;
        }
        
        .tree-item {
            display: flex;
            align-items: center;
            padding: 14px 16px;
            background: var(--bg-tertiary);
            border-radius: 10px;
            border: 1px solid transparent;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            min-height: 52px;
            position: relative;
            overflow: hidden;
        }
        
        .tree-item::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, 
                rgba(0, 212, 255, 0.1), 
                rgba(0, 255, 136, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .tree-item:hover::before {
            opacity: 1;
        }
        
        .tree-item:hover {
            border-color: var(--border-color);
            transform: translateX(4px);
        }
        
        .tree-item:active {
            transform: translateX(4px) scale(0.98);
        }
        
        .tree-item.selected {
            background: var(--active-bg);
            border-color: var(--accent-primary);
        }
        
        .tree-icon {
            width: 24px;
            height: 24px;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            position: relative;
            z-index: 1;
        }
        
        .tree-icon svg {
            width: 100%;
            height: 100%;
            stroke: var(--accent-primary);
            stroke-width: 2;
            fill: none;
            transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .tree-item.folder > .tree-icon svg {
            fill: var(--accent-primary);
            fill-opacity: 0.2;
        }
        
        .tree-item.expanded > .tree-icon svg.chevron {
            transform: rotate(90deg);
        }
        
        .tree-label {
            flex: 1;
            font-size: 15px;
            font-weight: 500;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            position: relative;
            z-index: 1;
            letter-spacing: -0.3px;
        }
        
        .tree-item.file .tree-label {
            color: var(--text-secondary);
            font-weight: 400;
        }
        
        .tree-children {
            list-style: none;
            margin-left: 24px;
            padding-left: 16px;
            border-left: 2px solid var(--border-color);
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .tree-children.expanded {
            max-height: 2000px;
            opacity: 1;
            margin-top: 8px;
            margin-bottom: 8px;
        }
        
        .tree-children .tree-node {
            animation: slideIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) backwards;
        }
        
        .tree-children .tree-node:nth-child(1) { animation-delay: 0.05s; }
        .tree-children .tree-node:nth-child(2) { animation-delay: 0.1s; }
        .tree-children .tree-node:nth-child(3) { animation-delay: 0.15s; }
        .tree-children .tree-node:nth-child(4) { animation-delay: 0.2s; }
        .tree-children .tree-node:nth-child(5) { animation-delay: 0.25s; }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            body {
                padding: 12px;
            }
            
            .container {
                padding: 20px;
                border-radius: 12px;
            }
            
            h1 {
                font-size: 24px;
                margin-bottom: 20px;
            }
            
            .tree-item {
                padding: 16px;
                min-height: 56px;
            }
            
            .tree-icon {
                width: 28px;
                height: 28px;
            }
            
            .tree-label {
                font-size: 16px;
            }
            
            .tree-children {
                margin-left: 20px;
                padding-left: 12px;
            }
        }
        
        /* Extra small devices */
        @media (max-width: 480px) {
            .tree-item {
                padding: 18px 14px;
                min-height: 60px;
            }
            
            .tree-label {
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>File Explorer</h1>
        <ul id="tree-root" class="tree"></ul>
    </div>

    <script>
        class TreeNode {
            constructor(label, type = 'file', children = []) {
                this.label = label;
                this.type = type;
                this.children = children;
                this.expanded = false;
                this.selected = false;
                this.element = null;
                this.childrenContainer = null;
            }
        }

        class TreeComponent {
            constructor(containerId, data) {
                this.container = document.getElementById(containerId);
                this.data = data;
                this.selectedNode = null;
                this.init();
            }

            init() {
                this.render();
            }

            render() {
                this.container.innerHTML = '';
                this.data.forEach(node => {
                    this.renderNode(node, this.container);
                });
            }

            renderNode(node, parentElement) {
                const li = document.createElement('li');
                li.className = 'tree-node';

                const itemDiv = document.createElement('div');
                itemDiv.className = `tree-item ${node.type}`;
                
                if (node.selected) {
                    itemDiv.classList.add('selected');
                }
                
                if (node.expanded) {
                    itemDiv.classList.add('expanded');
                }

                const iconDiv = document.createElement('div');
                iconDiv.className = 'tree-icon';
                
                if (node.type === 'folder') {
                    iconDiv.innerHTML = `
                        <svg class="chevron" viewBox="0 0 24 24">
                            <path d="M9 18l6-6-6-6" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    `;
                } else {
                    iconDiv.innerHTML = `
                        <svg viewBox="0 0 24 24">
                            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M13 2v7h7" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    `;
                }

                const labelSpan = document.createElement('span');
                labelSpan.className = 'tree-label';
                labelSpan.textContent = node.label;

                itemDiv.appendChild(iconDiv);
                itemDiv.appendChild(labelSpan);
                li.appendChild(itemDiv);

                node.element = itemDiv;

                if (node.type === 'folder' && node.children.length > 0) {
                    const childrenUl = document.createElement('ul');
                    childrenUl.className = 'tree-children';
                    
                    if (node.expanded) {
                        childrenUl.classList.add('expanded');
                    }

                    node.children.forEach(child => {
                        this.renderNode(child, childrenUl);
                    });

                    li.appendChild(childrenUl);
                    node.childrenContainer = childrenUl;

                    itemDiv.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.toggleNode(node);
                    });
                } else {
                    itemDiv.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.selectNode(node);
                    });
                }

                parentElement.appendChild(li);
            }

            toggleNode(node) {
                node.expanded = !node.expanded;
                
                if (node.element) {
                    if (node.expanded) {
                        node.element.classList.add('expanded');
                    } else {
                        node.element.classList.remove('expanded');
                    }
                }

                if (node.childrenContainer) {
                    if (node.expanded) {
                        node.childrenContainer.classList.add('expanded');
                    } else {
                        node.childrenContainer.classList.remove('expanded');
                    }
                }
            }

            selectNode(node) {
                if (this.selectedNode && this.selectedNode.element) {
                    this.selectedNode.element.classList.remove('selected');
                    this.selectedNode.selected = false;
                }

                node.selected = true;
                if (node.element) {
                    node.element.classList.add('selected');
                }
                
                this.selectedNode = node;
                
                console.log('Selected:', node.label);
            }

            expandAll() {
                const expand = (nodes) => {
                    nodes.forEach(node => {
                        if (node.type === 'folder') {
                            node.expanded = true;
                            if (node.element) {
                                node.element.classList.add('expanded');
                            }
                            if (node.childrenContainer) {
                                node.childrenContainer.classList.add('expanded');
                            }
                            if (node.children.length > 0) {
                                expand(node.children);
                            }
                        }
                    });
                };
                expand(this.data);
            }

            collapseAll() {
                const collapse = (nodes) => {
                    nodes.forEach(node => {
                        if (node.type === 'folder') {
                            node.expanded = false;
                            if (node.element) {
                                node.element.classList.remove('expanded');
                            }
                            if (node.childrenContainer) {
                                node.childrenContainer.classList.remove('expanded');
                            }
                            if (node.children.length > 0) {
                                collapse(node.children);
                            }
                        }
                    });
                };
                collapse(this.data);
            }
        }

        // Sample data
        const sampleData = [
            new TreeNode('Documents', 'folder', [
                new TreeNode('Work', 'folder', [
                    new TreeNode('presentation.pptx', 'file'),
                    new TreeNode('report.docx', 'file'),
                    new TreeNode('budget.xlsx', 'file')
                ]),
                new TreeNode('Personal', 'folder', [
                    new TreeNode('resume.pdf', 'file'),
                    new TreeNode('vacation-photos', 'folder', [
                        new TreeNode('beach.jpg', 'file'),
                        new TreeNode('mountain.jpg', 'file')
                    ])
                ])
            ]),
            new TreeNode('Projects', 'folder', [
                new TreeNode('website', 'folder', [
                    new TreeNode('index.html', 'file'),
                    new TreeNode('styles.css', 'file'),
                    new TreeNode('script.js', 'file')
                ]),
                new TreeNode('app', 'folder', [
                    new TreeNode('src', 'folder', [
                        new TreeNode('main.js', 'file'),
                        new TreeNode('utils.js', 'file')
                    ]),
                    new TreeNode('package.json', 'file')
                ])
            ]),
            new TreeNode('Downloads', 'folder', [
                new TreeNode('installer.exe', 'file'),
                new TreeNode('readme.txt', 'file')
            ]),
            new TreeNode('README.md', 'file')
        ];

        // Initialize the tree
        const tree = new TreeComponent('tree-root', sampleData);

        // Expose tree instance for testing
        window.treeComponent = tree;
    </script>
</body>
</html>